<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>wam.compiler documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Wam</span> <span class="project-version">0.0.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wam</span></div></div></li><li class="depth-2 branch"><a href="wam.anciliary.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>anciliary</span></div></a></li><li class="depth-2 branch current"><a href="wam.compiler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compiler</span></div></a></li><li class="depth-2 branch"><a href="wam.functor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>functor</span></div></a></li><li class="depth-2 branch"><a href="wam.grammar.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>grammar</span></div></a></li><li class="depth-2 branch"><a href="wam.graph-search.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>graph-search</span></div></a></li><li class="depth-2 branch"><a href="wam.instruction-set.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>instruction-set</span></div></a></li><li class="depth-2"><a href="wam.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="wam.compiler.html#var-assoc-variables"><div class="inner"><span>assoc-variables</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-compile-structure"><div class="inner"><span>compile-structure</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-compile-term"><div class="inner"><span>compile-term</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-emit-instructions"><div class="inner"><span>emit-instructions</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-program"><div class="inner"><span>program</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-program-builder"><div class="inner"><span>program-builder</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-query"><div class="inner"><span>query</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-query-builder"><div class="inner"><span>query-builder</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-register-allocation"><div class="inner"><span>register-allocation</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-register-names"><div class="inner"><span>register-names</span></div></a></li><li class="depth-1"><a href="wam.compiler.html#var-single-step"><div class="inner"><span>single-step</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">wam.compiler</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-assoc-variables"><h3>assoc-variables</h3><div class="usage"><code>(assoc-variables ctx register-allocation)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L151">view source</a></div></div><div class="public anchor" id="var-compile-structure"><h3>compile-structure</h3><div class="usage"><code>(compile-structure instruction-builder structure register-allocation seen?)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L102">view source</a></div></div><div class="public anchor" id="var-compile-term"><h3>compile-term</h3><div class="usage"><code>(compile-term builder term)</code></div><div class="doc"><pre class="plaintext">Emits a sequence of instructions that equates to provided term according
to the rules of the builder. Returns a function which is capable of
executing the instructions given a context.</pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L170">view source</a></div></div><div class="public anchor" id="var-emit-instructions"><h3>emit-instructions</h3><div class="usage"><code>(emit-instructions builder term register-allocation)</code></div><div class="doc"><pre class="plaintext">Constructs a sequence of instructions (missing the context argument)
suitable for threading with a context. The builder determines how
the structures in the term are walked (generally pre-order for
programs, and post-order for queries), and emits the most
appropriate instructions for each structure, which is reliant on
which arguments have been previously processed.</pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L124">view source</a></div></div><div class="public anchor" id="var-program"><h3>program</h3><div class="usage"><code>(program ctx expression)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L187">view source</a></div></div><div class="public anchor" id="var-program-builder"><h3>program-builder</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L83">view source</a></div></div><div class="public anchor" id="var-query"><h3>query</h3><div class="usage"><code>(query ctx expression)</code></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L180">view source</a></div></div><div class="public anchor" id="var-query-builder"><h3>query-builder</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L65">view source</a></div></div><div class="public anchor" id="var-register-allocation"><h3>register-allocation</h3><div class="usage"><code>(register-allocation term)</code></div><div class="doc"><pre class="plaintext">Variable registers are allocated to a term on a least available index basis
such that (1) register X1 is always allocated to the otutermost term, and
(2) the same register is allocated to all occurrences of a given variable.
For example, registers are allocated to the variables of the term
p(Z, h(Z,W), f(W)) as follows:

  X1 = p(X2, X3, X4)
  X2 = Z
  X3 = h(X2, X5)
  X4 = f(X5)
  X5 = W

This amounts to saying that a term is seen as a flattened conjunctive set
of equations of the form Xi = X or Xi = f(Xi1, ..., Xin), n&gt;=0 where
the Xi's are all distinct new variable names.

A hashmap is returned with key as the term, and the value as allocated
register,</pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L41">view source</a></div></div><div class="public anchor" id="var-register-names"><h3>register-names</h3><div class="usage"><code>(register-names prefix)</code></div><div class="doc"><pre class="plaintext">Generates an infinite incrementing sequence of register symbols,
e.g. X1, X2, X3, X4 ...</pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L33">view source</a></div></div><div class="public anchor" id="var-single-step"><h3>single-step</h3><div class="usage"><code>(single-step ctx [instr &amp; args])</code></div><div class="doc"><pre class="plaintext">Execute an instruction with respect to the supplied context, if
the fail flag has not been set. If the context has failed, then
just return the context unchanged (i.e. don't execute the instruction).
This causes the remaining instructions to also fall through.</pre></div><div class="src-link"><a href="http://github.com/rm-hull/wam/blob/master/src/wam/compiler.clj#L157">view source</a></div></div></div></body></html>